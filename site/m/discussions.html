<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta property="og:type" content="website">
    <meta property="og:title" content="×§×•×œ×•×ª × ×•×“×“×™× â€” ×“×™×•× ×™×">
    <meta property="og:description" content="× ×™×ª×•×— ××™× ×˜×¨××§×˜×™×‘×™ ×©×œ × ×ª×•× ×™ ×‘×—×™×¨×•×ª ×œ×›× ×¡×ª â€” Interactive Israeli Knesset election data analysis">
    <meta property="og:image" content="https://kolot-nodedim.netlify.app/og-image.png">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <title>×“×™×•× ×™× - ×§×•×œ×•×ª × ×•×“×“×™×</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="../i18n.css">
    <script src="../i18n.js"></script>
    <style>
        .forum-tabs {
            position: fixed;
            top: 44px;
            left: 0;
            right: 0;
            z-index: 400;
            display: flex;
            gap: 4px;
            padding: 8px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .forum-tab {
            padding: 6px 12px;
            border-radius: 14px;
            font-size: 0.75rem;
            font-weight: 500;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            white-space: nowrap;
            font-family: inherit;
            transition: all 0.15s;
        }

        .forum-tab.active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .giscus-area {
            position: fixed;
            top: 94px;
            left: 0;
            right: 0;
            bottom: 56px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 8px;
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <a href="index.html" class="home-link">ğŸ </a>
        <span class="title"><span data-i18n="site_title">×§×•×œ×•×ª × ×•×“×“×™×</span> Â· <span data-i18n="nav_discussions">×“×™×•× ×™×</span></span>
    </div>

    <div class="forum-tabs" id="forum-tabs">
        <button class="forum-tab active" data-term="Site Feedback" data-i18n="forum_feedback">××©×•×‘ ×¢×œ ×”××ª×¨</button>
        <button class="forum-tab" data-term="Feature Ideas" data-i18n="forum_features">×”×¦×¢×•×ª ×œ×¤×™×¦'×¨×™×</button>
        <button class="forum-tab" data-term="Elections Theory" data-i18n="forum_elections">×ª××•×¨×™×™×ª ×‘×—×™×¨×•×ª</button>
        <button class="forum-tab" data-term="Data and Methodology" data-i18n="forum_data">× ×ª×•× ×™× ×•××ª×•×“×•×œ×•×’×™×”</button>
        <button class="forum-tab" data-term="General" data-i18n="forum_general">×©×™×—×” ×—×•×¤×©×™×ª</button>
    </div>

    <div class="giscus-area" id="giscus-container"></div>

    <nav class="tab-bar">
        <a href="geomap.html"><span class="tab-icon">ğŸ—ºï¸</span><span data-i18n="tab_map">××¤×”</span></a>
        <a href="tsne.html"><span class="tab-icon">ğŸ”µ</span><span data-i18n="tab_tsne">×¤×™×–×•×¨</span></a>
        <a href="sankey.html"><span class="tab-icon">ğŸ”€</span><span data-i18n="tab_sankey">× ×“×™×“×”</span></a>
        <a href="scatter.html"><span class="tab-icon">ğŸ“ˆ</span><span data-i18n="tab_scatter">×”×©×•×•××”</span></a>
        <a href="dhondt.html"><span class="tab-icon">ğŸ›ï¸</span><span data-i18n="tab_dhondt">×× ×“×˜×™×</span></a>
        <a href="regional.html"><span class="tab-icon">ğŸ§©</span><span data-i18n="tab_regional">××–×•×¨×™</span></a>
        <a href="discussions.html" class="active"><span class="tab-icon">ğŸ’¬</span><span data-i18n="nav_discussions">×“×™×•× ×™×</span></a>
    </nav>

    <script>
    (function() {
        'use strict';

        const container = document.getElementById('giscus-container');
        let currentTerm = 'Site Feedback';

        function loadGiscus(term) {
            container.innerHTML = '';
            const script = document.createElement('script');
            script.src = 'https://giscus.app/client.js';
            script.setAttribute('data-repo', 'harelc/elections-vote-transfer');
            script.setAttribute('data-repo-id', 'MDEwOlJlcG9zaXRvcnkyMDk3NjMzMTg=');
            script.setAttribute('data-category', 'General');
            script.setAttribute('data-category-id', 'DIC_kwDODIC79s4C2KaY');
            script.setAttribute('data-mapping', 'specific');
            script.setAttribute('data-term', term);
            script.setAttribute('data-strict', '0');
            script.setAttribute('data-reactions-enabled', '0');
            script.setAttribute('data-emit-metadata', '0');
            script.setAttribute('data-input-position', 'top');
            script.setAttribute('data-theme', 'dark');
            script.setAttribute('data-lang', i18n.getLang());
            script.setAttribute('crossorigin', 'anonymous');
            script.async = true;
            container.appendChild(script);
            currentTerm = term;
        }

        document.getElementById('forum-tabs').addEventListener('click', e => {
            const tab = e.target.closest('.forum-tab');
            if (!tab || tab.classList.contains('active')) return;
            document.querySelectorAll('.forum-tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            loadGiscus(tab.dataset.term);
        });

        window.addEventListener('langchange', () => {
            const iframe = document.querySelector('iframe.giscus-frame');
            if (iframe) {
                iframe.contentWindow.postMessage(
                    { giscus: { setConfig: { lang: i18n.getLang() } } },
                    'https://giscus.app'
                );
            }
        });

        loadGiscus(currentTerm);
    })();
    </script>
    <script>i18n.injectLangToggle('.top-bar');i18n.renderMobileBMC();</script>
</body>
</html>
